<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div></div>
    <!--<div id="test">-->
        <!--我是测试啊-->
        <!--<div id="must">333 </div>-->
    <!--</div>-->

    <!--<script src="js/test/testJq.js"></script>-->

    <script>

        ;
        (function () {

            var chunker = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;
            var test = function (selector) {

                if(!selector || typeof selector!=="string"){
                    return false;
                }

                var m = '',
                    sofar = selector,
                    extra,
                    parts = [];

                do{
                    chunker.exec('');
                    m = chunker.exec(sofar);

                    console.log(m);

                    if(m){
                        sofar = m[3];
                        parts.push(m[1]);

                        if(m[2]){
                            extra = m[3];
                            break;
                        }
                    }
                }while(m)

                console.log(parts);
                console.log(extra);

            };

            var Expr = Sizzle.selectors = {
                order: ["ID", "NAME", "TAG"],

                match: {
                    ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                    CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                    NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
                    ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
                    TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
                    CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
                    POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
                    PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
                }

            }

            window['test'] = test;
        })();

        test("div button:first,div p:first,p span:first");
    </script>
</body>
</html>